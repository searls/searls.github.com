<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cramming a gaming GPU into your MacBook Pro</title>
  


<meta property="og:title" content="Cramming a gaming GPU into your MacBook Pro">
<meta property="og:description" content="A thing @searls wrote for you.">
<meta property="og:image" content="https://justin.searls.coimg/facebook-card.png">
<meta property="og:url" content="https://justin.searls.co/posts/gaming-with-a-mac-plus-egpu/">


<meta name="twitter:title" content="Cramming a gaming GPU into your MacBook Pro">
<meta name="twitter:description" content="A thing @searls wrote for you.">
<meta name="twitter:image" content="https://justin.searls.coimg/twitter-card.png">
<meta name="twitter:card" content="summary_large_image">

  



<link rel="stylesheet" href="/css/main.min.7ff46561f8b636e37bd398a4c2e74488a687ec6b0f9076559cf79ac4af509ca2.css" integrity="sha256-f/RlYfi2NuN705ikwudEiKaH7GsPkHZVnPeaxK9QnKI=">

  </head>
<body>
    <div id="wrap"><header>
  <h1><a href="https://justin.searls.co">justin.searls.co</a></h1>
</header>
<div id="main">
  <article>
    <h1>Cramming a gaming GPU into your MacBook Pro</h1>
    

<h2 id="without-actually-doing-that">…without actually doing that</h2>

<h2 id="how-we-got-here">How we got here</h2>

<p>After Apple released its (soon-to-be) previous generation Mac Pro, it probably didn't take long for them to realize they had a trash can fire on their hands, especially with <a href="https://marco.org/2019/06/09/apple-is-listening">regards to GPU performance</a>. When Apple announced eGPU support for macOS in 2017's <a href="https://web.archive.org/web/20170731114535/https://www.apple.com/macos/high-sierra-preview/">High Sierra release</a>, it was hard not to see the announcement as anything more than an admission that Apple's top-of-the-line desktops and notebooks shipped with subpar GPUs due to their severe thermal constraints. Of course,  because Apple has never considered AAA gaming to be an important function of its products, the Mac has always lagged behind Windows in GPU availability and support. But by 2017 (and until the new <a href="https://www.imore.com/mac-pro-2019-everything-you-need-know">Mac Pro</a> tower releases this fall), the situation has been especially grim: even for workstation tasks like video encoding and 3D modeling, the internal GPUs Apple has been selling are so bad that they're driving a nontrivial number of creative professionals—a market Apple actually does care about—off its platform.</p>

<p>The world may be excited to close the door on the ill-conceived trash can Mac Pro, but if it hadn't been for its glaring design flaws, Apple and Intel probably wouldn't have prioritized the engineering needed to make running an eGPU over Thunderbolt 3 a commercial reality.</p>

<p>So, it's thanks to the trash can Mac Pro that in 2019, it can truthfully be said: instead of putting a beefy graphics card <em>inside</em> your computer, <strong>you are now able to take a top-of-the-line gaming GPU, seat it inside an external box, plug that box into your computer, and—using a single high-bandwidth cable—push the necessary instructions to render 4K games at 60 frames per second on the card before (over the very same cable!) pushing those frames back to your notebook's built-in monitor without introducing any perceptible latency</strong>. I've seen daily evidence of this for the last month and I gotta say: it's pretty freakin' cool.</p>

<p>The idea that you'd be able to connect a GPU over a 2-meter cable and get desktop-class gaming performance out of the current crop of MacBooks Pro seems far-fetched. Even to me, as I literally play games with one. When reasonable people encounter Apple's marketing about eGPUs—which is only focused on creative professional workflows like <a href="https://www.youtube.com/watch?v=S48T-cOG0ks"><em>modeling</em> VR experiences as opposed to <em>experiencing</em> them</a>—it would be unreasonable to make the logical leap to say, &quot;ah, yes, surely if I boot that computer into Windows, the eGPU enclosure would have the necessary drivers and the Thunderbolt 3 cable would have the necessary bandwidth to render games in real-time with an acceptable frame rate and input latency.&quot;</p>

<p><em>And yet</em>, AAA PC gaming is actually within reach of a recent MacBook Pro paired with an eGPU. It's just that nobody <a href="https://www.razer.com/gaming-laptops/razer-core-x">other than Razer</a> is telling the market that.</p>

<h2 id="how-to-get-started">How to get started</h2>

<p>I pieced this all together from dozens of forum posts, guides, and build data from the small-but-dedicated community at <a href="https://egpu.io">eGPU.io</a>. Because the very-newest Macs, eGPU enclosures, and operating system releases have made things much easier as of late, much of the content in the most popular guides is no longer relevant. Therefore, I will try to document here a stripped-down walkthrough that starts fresh with the latest operating systems and hardware components.</p>

<p><strong>Hardware:</strong></p>

<ul>
<li><a href="https://everymac.com/systems/apple/macbook_pro/specs/macbook-pro-core-i5-2.4-quad-core-13-mid-2019-touch-bar-specs.html">13-inch MacBook Pro (mid-2019)</a></li>
<li><a href="https://www.amd.com/en/products/graphics/amd-radeon-vii">AMD Radeon VII</a> card</li>
<li><a href="https://www.amazon.com/Razer-Core-V2-Thunderbolt-Enclosure/dp/B0791ZCH4Q">Razer Core V2</a> (which Razer has already discontinued in favor of the larger, cheaper <a href="https://www.razer.com/gaming-laptops/razer-core-x">Razer Core X</a>)</li>
<li>Any certified <a href="https://www.amazon.com/gp/product/B01H5QF2TK/ref=ppx_yo_dt_b_search_asin_title?ie=UTF8&amp;psc=1">2 meter Thunderbolt 3 cable</a></li>
<li>Any TV or external monitor you want to output games to (Optional)</li>
</ul>

<p><strong>Software:</strong></p>

<ul>
<li>macOS 10.14.5 (18F132)</li>
<li>Windows 10 version 1903 (18362.175)</li>
</ul>

<h3 id="initial-questions-you-might-have">Initial questions you might have</h3>

<p><strong>What about my 15&quot; MacBook Pro?</strong> The 15&quot; MacBook Pro may be beefier, but it's
actually more of a pain to set up for this purpose, because convincing Windows
to yield to the eGPU instead of the discrete AMD GPU that the 15&quot; model ships
with takes a bit of work. Most of this guide will suit you fine, but <a href="https://egpu.io/forums/mac-setup/how-to-keep-mbps-irisiris-pro-activated-when-booting-into-windows-boot-camp/">this
thread</a>
might provide some guidance beyond what I offer here.</p>

<p><strong>Why an AMD card over Nvidia?</strong> If you plan on ever plugging the eGPU into macOS (as opposed to Windows), you're going to have a much easier time of it with an AMD card. macOS ships with drivers for most AMD cards, but Nvidia support is a <a href="https://egpu.io/forums/mac-setup/wip-nvidia-egpu-support-for-high-sierra/">tremendous pain</a> that's only getting worse with time, as zero Mac drivers are available for their new <a href="https://www.nvidia.com/en-us/geforce/20-series/">RTX</a> line.</p>

<p><strong>Why a Razer Core V2?</strong> I chose this model because it's lightweight (at a &quot;mere&quot; 11 pounds), properly isolates bandwidth (5gbps) for its 4 USB ports, and is relatively small (7.5 liter). It can't help much with heat or noise, though. In truth, there are actually quite a few <a href="https://egpu.io/external-gpu-buyers-guide-2019/">decent options out there</a>, and most will incorporate the same Thunderbolt 3 controller doing the heavy lifting.</p>

<p><strong>Why an external monitor?</strong> While both macOS and Windows can &quot;loopback&quot; frames rendered by the eGPU over the cable and onto the computer's built-in monitor, operating system support for this is very recent and it introduces a nonzero bandwidth cost which can result in lower framerates as well as frames being dropped. Adding to that, the relatively high DPI of Apple's displays makes running games at native resolutions more demanding than monitors designed for PC gaming.</p>

<p><strong>What about my pre-2019 MacBook Pro?</strong> If your Mac has Thunderbolt 3 ports (<a href="https://everymac.com/systems/apple/macbook_pro/specs/macbook-pro-core-i5-2.0-13-late-2016-retina-display-no-touch-bar-specs.html">late-2016</a> or later), you'll be able to figure out a way to make it work, but with an increased amount of Windows futzing for each year you go back. I initially set all this up with a <a href="https://everymac.com/systems/apple/macbook_pro/specs/macbook-pro-core-i5-2.3-13-mid-2017-retina-display-no-touch-bar-specs.html">mid-2017</a> MacBook Pro, but wound up spending six or seven hours applying various salves and incantations to try to work around &quot;<a href="https://egpu.io/forums/pc-setup/2016-macbook-pro-solving-egpu-error-12-in-windows-10/">Windows Error 12</a>&quot;, which is the nonsense Device Manager will spew when Windows can't figure out how to get sufficient bandwidth and memory addressed to the eGPU.</p>

<p>Ok, with that out of the way. Let's see what it looks like to set this all up.</p>

<h2 id="step-by-step-instructions">Step-by-step instructions</h2>

<p>At the risk of being too verbose, I've decided to document literally every little step of the process I took in setting things up, because even minor gaps I found in other people's builds online would often mask tremendous complexities that took me hours to figure out on my own.</p>

<h3 id="assembling-the-egpu">Assembling the eGPU</h3>

<p>Start by unboxing your GPU and eGPU enclosure.</p>

<p>So, here's a Radeon VII card:</p>

<p><img src="/uploads/egpu/IMG_4111.jpg" alt="Radeon VII card" /></p>

<p>And here's a Razer Core V2 eGPU enclosure:</p>

<p><img src="/uploads/egpu/IMG_4113.jpg" alt="A Razer Core V2 eGPU enclosure" /></p>

<p>Razer's eGPU models have a simple handle locking mechanism that makes it easy to get at the PCI slot and release or mount a card. Mounting a card is pretty simple: just remove the I/O plate facade, push the card's pins into the slot, and connect the enclosure's two ATX power connectors into the top of the card. It'll look like this before you slide it back into place:</p>

<p><img src="/uploads/egpu/IMG_4112.jpg" alt="A Radeon VII card seated inside the PCI slot of a Razer Core V2" /></p>

<p>If you opt for the cheaper, quieter, larger Razer Core X, here's an idea of the size difference:</p>

<p><img src="/uploads/egpu/IMG_4114.jpg" alt="a large Razer Core X and a small Razer Core V2 sitting side by side" /></p>

<p>And finally, here's what it all looks like when thrown onto a desk with a monitor and a keyboard:</p>

<p><img src="/uploads/egpu/IMG_4122.jpg" alt="monitor, keyboard, mouse, eGPU, and closed MacBook Pro" /></p>

<p>The eGPU ships with a hilariously short 1-foot cable, so you'll want to reach for an active 2 meter cable as soon as possible.</p>

<h3 id="setting-up-macos">Setting up macOS</h3>

<p>This one's easy: update macOS to the current release version, which (as of this writing) is 10.14.5. If you're on that version or newer, just plug the eGPU enclosure into a power outlet, then connect it to the computer via a Thunderbolt 3 cable, and you should immediately see it recognized in the &quot;About This Mac&quot; view:</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-12 at 9.55.41 PM.png" alt="macOS About This System dialog, showing version 10.14.5" /></p>

<p>And that's it. On macOS, this is all truly plug-and-play. If you have any games that run on macOS, they should be able to immediately take advantage of the eGPU.</p>

<p>If you have certain apps that need an extra push to use that GPU, you can tell macOS to present only that GPU to them by checking &quot;Prefer external GPU&quot; in the application's &quot;Get Info&quot; dialog in Finder:</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-30 at 9.40.00 AM.png" alt="Dialog for &quot;Prefer External GPU&quot;" /></p>

<p>And, while you can &quot;hot plug&quot; an eGPU into your machine at any time while running the computer, I think it'd be more fair to say you can merely &quot;warm unplug&quot; it. You're first supposed to tell macOS to force restart any apps that are currently depending on the eGPU via this menu bar option:</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-30 at 9.44.18 AM.png" alt="Menubar option to disconnect eGPU" /></p>

<p>If you fail to do this and yank the cable without first unmounting the eGPU, macOS will yell at you (before proceeding to force-restart most of the apps you were just running):</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-30 at 9.48.27 AM.png" alt="macOS warning not to unplug the eGPU without unmounting it first" /></p>

<p>And that's pretty much all there is to using an eGPU with macOS. The entire experience is so invisible and seamless that Apple's engineers deserve to be commended.</p>

<h3 id="installing-windows-via-boot-camp">Installing Windows via Boot Camp</h3>

<p><strong>Before you do anything else, disconnect your eGPU.</strong> When it's safe to plug it in under Windows, I'll let you know!</p>

<p>This process hasn't changed much in the last 12 years. Start by <a href="https://www.microsoft.com/en-us/software-download/windows10">downloading Windows 10</a>.</p>

<p>As of mid-June 2019, the most recent downloadable version of the Windows 10 installer was the October 2018 release:</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-14 at 7.25.16 PM.png" alt="Windows 10 download dialog" /></p>

<p>Once downloaded, launch Boot Camp Assistant, which will download some support software, ask for the Windows disk image (which, if the download is complete, it may detect automatically), and prompt you to choose your partition size:</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-14 at 7.49.01 PM.png" alt="Boot Camp assistant setup page" /></p>

<p>Boot Camp Assistant is still finicky and on AFPS volumes will regularly report failure when attempting to partition the disk.</p>

<p><img src="/uploads/egpu/Screen Shot 2019-06-14 at 8.25.33 PM.png" alt="boot camp partition failure" /></p>

<p>When this happens, just quit the app, reboot, and try again. It has never not taken me at least two tries. Once it's working, you should be booted into the Windows installer:</p>

<p><img src="/uploads/egpu/Image-1.jpeg" alt="" /></p>

<p>The most important step is actually <em>not</em> entering your product key (which can be done later), but ensuring you pick the edition of Windows for which you have (or want) a license. In my case, Windows 10 Pro:</p>

<p><img src="/uploads/egpu/Image 2.jpeg" alt="Windows Installer edition selection page" /></p>

<p>The next thing to look out for is that once Windows boots, an Apple-deployed script will run which <em>should</em> launch the Boot Camp installer, which contains all of your machine's drivers and which you'll definitely want to install immediately before you do anything else:</p>

<p><img src="/uploads/egpu/Image 3.jpeg" alt="the Windows Boot Camp Support installer" /></p>

<p>Because each subsequent Windows release is dramatically improving its own eGPU support, before doing anything else you'll want to upgrade to the latest available stable version. For reference, my installer started me at Windows 10 version 1809, which wasn't the latest major release.</p>

<p>The most recent release at the time was 1903, but Windows 10 is especially precious about how it rolls out system updates across its install base, and actually does not expose a mechanism in the operating system to tell it &quot;shut up, just give me the latest and greatest.&quot; You can force-trigger a release by visiting a particular <a href="https://microsoft.com/en-us/software-download/windows10?">Microsoft web page</a> and clicking &quot;Update now&quot;, however:</p>

<p><img src="/uploads/egpu/1.jpg" alt="update windows 10 page" /></p>

<p>Weird.</p>

<p>Anyway, that'll take entirely too long to download, so go make a sandwich, I guess. I was too afraid of continuing with any configuration when so many things were likely to have been improved in the newer release. So I'd recommend just waiting for this update to finish:</p>

<p><img src="/uploads/egpu/2.jpg" alt="windows 10 update app" /></p>

<h3 id="enabling-windows-system-protection">Enabling Windows system protection</h3>

<p>Once Windows has updated itself and restarted, we want to create a System Restore Point, so that we can easily unwind any driver &amp; configuration changes we make if we run into trouble. You can do this by hitting the windows key and searching &quot;restore point&quot; to open this dialog:</p>

<p><img src="/uploads/egpu/3d.jpg" alt="Windows 10 System properties preferences" /></p>

<p>Click &quot;Configure&quot; restore settings, and in the subsequent dialog box choose &quot;Turn on system protection&quot; (how is this not on by default?!):</p>

<p><img src="/uploads/egpu/3.jpg" alt="windows 10 system protection settings" /></p>

<p>Click OK, and in the previous pane, you should now be able to click &quot;Create&quot; a restore point:</p>

<p><img src="/uploads/egpu/3e.jpg" alt="Windows 10 system properties after system protection has been enabled" /></p>

<p>You'll be asked to name the restore point, and you can give it whatever name you want:</p>

<p><img src="/uploads/egpu/3f.jpg" alt="Create a restore point dialog, named 1-initial-setup" /></p>

<h3 id="running-ddu-to-take-control-of-windows-gpu-drivers">Running DDU to take control of Windows GPU drivers</h3>

<p>Next, because Windows 10's built-in methods for locating and installing GPU drivers will often interfere with the chipmakers' own software, prior to plugging in your eGPU or installing any AMD or Nvidia drivers, you actually want to <em>uninstall</em> all GPU drivers and prevent Windows Update from attempting to install new ones. This can be done with a program called DDU which can be <a href="https://www.wagnardsoft.com">downloaded here</a> (I used <a href="https://www.wagnardsoft.com/forums/viewtopic.php?f=5&amp;t=1788">version 18.0.1.5</a>). The website looks like every other official home for software that runs on Windows:</p>

<p><img src="/uploads/egpu/8.jpg" alt="the DDU home page" /></p>

<p>Because the only download link that isn't a display ad will disappear every few seconds as part of a timed carousel animation, just wait until you can time your click such that you successfully download it. This took me no fewer than three tries.</p>

<p>Once installed, run it and it'll complain that you're not in Windows Safe mode:</p>

<p><img src="/uploads/egpu/7.jpg" alt="DDU launcher" /></p>

<p>At the time of this writing and with this mix of hardware and software, it actually didn't appear to be possible to boot Windows 10 into Safe Mode under Boot Camp, so I just launched DDU anyway.</p>

<p>Since I was going to install a Radeon card, I selected AMD from the dropdown box near the top-right of the UI, resulting in the app shading itself like this:</p>

<p><img src="/uploads/egpu/5.jpg" alt="The DDU UI after selecting AMD Radeon" /></p>

<p>From there, open the options and check the &quot;Prevent downloads of drivers from 'Windows update'&quot; box at the bottom of the page:</p>

<p><img src="/uploads/egpu/6.jpg" alt="DDU advanced options where you'll prevent downloads from Windows Update" /></p>

<p>This will prevent Windows Update from attempting to install any GPU drivers. Windows Update doesn't normally screw up GPU drivers once things are initially set up, but because you're likely going to be connecting and disconnecting a GPU with much greater regularity than you ever would on a traditional PC tower (much less into any of four different Thunderbolt 3 ports), the risk is much greater of Windows screwing up your GPU drivers when attempting to configure your eGPU.</p>

<p>Okay, after checking &quot;prevent downloads&quot;, close the options menu and then click &quot;<strong>Clean and restart</strong>&quot;in the top-left corner of DDU's interface. It may warn you again and you will ignore it, because you've been using Windows for two hours at this point and you've already dismissed twenty pointless warning dialogs:</p>

<p><img src="/uploads/egpu/4.jpg" alt="DDU warning you will ignore" /></p>

<p>When that's done, restart, hit the Windows key and type &quot;restore point&quot; again to create a second restore point after you've run DDU but before you've downloaded your GPU's drivers:</p>

<p><img src="/uploads/egpu/3b.jpg" alt="A second restore point named 2-post-ddu" /></p>

<h3 id="install-your-gpu-drivers">Install your GPU drivers</h3>

<p><strong>Next up, you should finally plug in your eGPU!</strong> Give Windows a minute as the eGPU warms up to detect the Thunderbolt controller. If you open Device Manager you should see a display adapter named &quot;Microsoft Basic Display Adapter&quot;:</p>

<p><img src="/uploads/egpu/a3.jpg" alt="Device manager" /></p>

<p>If you check the properties of that (driverless) display adapter, they'll look like this;</p>

<p><img src="/uploads/egpu/a.jpg" alt="Display adapter properties" /></p>

<p>This is great! It means Windows is connecting to your eGPU enclosure's Thunderbolt 3 controller fine, and it can tell there's a GPU plugged into it.</p>

<p>Next, we'll want to install drivers.</p>

<ul>
<li><strong>AMD:</strong> Go to the <a href="https://www.amd.com/en/support">downloads page</a> and scroll down to download the &quot;Auto-Detect and Install Radeon Graphics Drivers for Windows&quot; installer</li>
<li><strong>Nvidia:</strong> <a href="https://www.geforce.com/drivers">Download GeForce Experience</a> under &quot;Automatic Driver Updates&quot;</li>
</ul>

<p>The installation process for both is dead simple and fully automated. Either will prompt you to restart Windows, but <strong>don't click Restart</strong>. Instead, shut down the computer entirely. Once it's off, unplug the eGPU, boot it up again, login, and plug the eGPU back in.</p>

<blockquote>
<p><strong>Why not restart with the eGPU connected?</strong> The hand-wavy short version is that when Windows boots normally on a Mac with an eGPU connected, the device is initialized in such a way by the EFI boot loader so as to not work as expected. (In my case, that meant Windows could never successfully boot if the eGPU was connected at boot time.) All this means that, out-of-the-box, you'll probably need to plug in your eGPU on Windows only after you're booted and logged in. There is a way around this, but it's not pretty—I'll explain below when I talk about rEFInd.</p>
</blockquote>

<p>Anyway, so after you've booted up again and re-plugged in your eGPU, go back to Device Manager. With any luck, the GPU will now be recognized for what it is within 20 or 30 seconds, and you should see the model name of the card you put in there:</p>

<p><img src="/uploads/egpu/a4.jpg" alt="Device manager with a Radeon VII on it" /></p>

<p>In my case, when I view the properties of the AMD Radeon VII display adapter, everything looks good:</p>

<p><img src="/uploads/egpu/a2.jpg" alt="" /></p>

<p>There is a really good chance, however, that you'll see a yellow exclamation point over the GPU's icon, and instead of &quot;This device is working properly&quot;, you'll be greeted by &quot;Error 12&quot; and  a message that the device doesn't have sufficient resources (read: either memory addressing or bandwidth) to be used. If you see this, your GPU won't engage at all, and you'll have to troubleshoot it. There are a bunch of ideas <a href="https://egpu.io/forums/pc-setup/2016-macbook-pro-solving-egpu-error-12-in-windows-10/">in this thread</a>, but what will work for you depends on a combination of factors.</p>

<p>Before you get too deep in the weeds trying to solve this, however, be sure to try connecting the eGPU to each of the four Thunderbolt 4 ports of your MacBook Pro, each separated by a system reboot. It may be the case that one of them works reliably (on the 13&quot; models, the left-front port typically has the most available bandwidth for  Thunderbolt 3 PCIe devices).</p>

<p>In any case, if and when Windows reports the device is working properly, that means you should be able to drive an external display by connecting it to one of your card's output ports. You may be able to imagine that this requires significantly less bandwidth than looping back to the built-in monitor, because all the information involved is traveling in one direction (instructions move from the computer to the eGPU, and those rendered frames go from the eGPU onward to the monitor).</p>

<p>Once you've connected a second monitor, if you want to ensure no Thunderbolt 3 bandwidth is wasted on driving your MacBook's display, hit Windows-P repeatedly until you select &quot;second screen only&quot;, effectively disabling the notebook display under Windows:</p>

<p><img src="/uploads/egpu/d.jpg" alt="The Windows display mode options" /></p>

<h3 id="adjust-windows-sleep-settings">Adjust Windows sleep settings</h3>

<p>Several eGPU enclosures as well as specific cards have a really hard time figuring out what to do with their fans when Windows goes to sleep. In my case, every time Windows slept or I closed my MacBook Pro's lid, both the GPU's and the enclosure's fans all began spinning at 100% speed, which—fun fact—was a very loud 59dB measured from about a meter away.</p>

<p>To avoid this, I went through and disabled Windows sleep everywhere I could.</p>

<p>First, hit the Windows key and type &quot;power&quot; to bring up the basic power preferences:</p>

<p><img src="/uploads/egpu/e3.jpg" alt="" /></p>

<p>All I changed here was to set &quot;When plugged in, PC goes to sleep after&quot; to &quot;Never&quot;, which doesn't form a real sentence, but will solve the primary problem of eGPUs freaking out during Windows sleep. Note that it is safe to allow sleep when on battery power, since all eGPU enclosures supply power to the system over the Thunderbolt 3 cable, you're never <em>not</em> plugged in when they're connected.</p>

<p>Next, click additional power settings and stumble around until you find this energy settings page:</p>

<p><img src="/uploads/egpu/e1.jpg" alt="Windows 10 energy settings" /></p>

<p>Of these, the most important is that you be able to close the lid without triggering Windows sleep when you're plugged in. But you can see I also disabled sleep when pressing the power button, as well as removing all sleep-related options from the start menu.</p>

<h3 id="run-some-benchmarks">Run some benchmarks</h3>

<p>From here, you can start installing and trying out some games. To verify everything is working as you expect, it might make sense to run a benchmark. A free one you might try is the <a href="http://benchmark.unigine.com/superposition">Unigine &quot;superposition&quot; benchmark</a>, which should be able to stress any GPU currently on the market.</p>

<p>If you're not familiar, benchmarks are basically complex 3D rendered game-like environments that are scripted as opposed to being interactive. Running a 2 or 3 minute demo, benchmarks usually do just enough to heat up the GPU and measure how it performs under load.</p>

<p>Because I was connected to a 4K monitor, I ran the benchmark at &quot;4K optimized&quot; and this setup yielded a score of 7037, whatever that means:</p>

<p><img src="/uploads/egpu/IMG_0249.jpg" alt="benchmark results" /></p>

<p>The Razer Core V2 really doesn't hide any noise at all, so in addition to running fairly hot, it was definitely pretty loud: between 53-56dB from a meter away. Because I'm used to modern GPUs being six feet away under a TV and in a massive noise-dampening case, the screeches and whines that result when the GPU is being put to work terrify me that something is wrong, but I have zero actual indication that I'm being anything but paranoid.</p>

<h3 id="install-refind-boot-manager">Install rEFInd Boot Manager</h3>

<p>To work around the issue of your eGPU being initialized improperly at boot-time when booting into Windows when the eGPU is connected, you can use <a href="http://www.rodsbooks.com/refind/">rEFInd</a> as your boot manager specifically to <em>pretend</em> that you're booting macOS each time you boot Windows for the purpose of hardware initialization. If this sounds dumb, it really is.</p>

<p>Only proceed with this section of installing rEFInd if you want to be able to perform a cold boot into Windows without first disconnecting the eGPU. It's a silly amount of security compromise and complexity for such a small quality of life improvement, but if you're going to be switching between Windows and macOS frequently, or if you're using a headless Mac like a Mac Mini, or if you're struggling to overcome &quot;<a href="https://egpu.io/forums/pc-setup/2016-macbook-pro-solving-egpu-error-12-in-windows-10/">Error 12</a>&quot;, installing rEFInd might be worth it to you.</p>

<p>First, <a href="http://www.rodsbooks.com/refind/getting.html">download the binary zip file</a> linked to from the project page. Extract the directory to someplace you can find easily from the command line for the next few steps. I put mine in my home directory: <code>/Users/justin/refind-bin-0.11.4</code>.</p>

<h4 id="disable-secure-boot">Disable Secure Boot</h4>

<p>If your Mac has a T2 chip, it is pre-configured to only boot Apple-approved operating systems, of which rEFInd most certainly is not. To disable this feature, reboot your Mac into Recovery Mode while holding Command-R.</p>

<p>Once in Recovery Mode, from the Utilities menu, open Startup Security Utility, and enter an administrator's password. It should look like this:</p>

<p><img src="/uploads/egpu/macos-high-sierra-startup-security-utility.png" alt="startup security utility" /></p>

<p>To use rEFInd, you'll need to select &quot;No Security&quot; under &quot;Secure Boot&quot;. Once toggled, you can quit the app.</p>

<p>Next, from the Utility menu, launch the Terminal app. Here, you'll need to disable <a href="https://en.wikipedia.org/wiki/System_Integrity_Protection">System Integrity Protection</a> (SIP) so that you can write to the <a href="https://en.wikipedia.org/wiki/EFI_system_partition">EFI system partition</a> (ESP). To do this, in Terminal, execute:</p>

<pre><code># csrutil disable
</code></pre>

<p>Now, for this to take effect, you'll need to restart the Mac and hold command-R to reboot into Recovery Mode <em>yet again</em>.</p>

<p>Once back in Recovery Mode, you'll need to mount your main Mac partition so that you can get access to the rEFInd installer you downloaded previously. You can do this by launching Disk Utility from the Utilities menu, clicking &quot;Macintosh HD&quot; and clicking the &quot;Mount&quot; toolbar button:</p>

<p><img src="/uploads/egpu/Image-2.jpeg" alt="Disk Utility" /></p>

<p>If FileVault is enabled, mounting the drive will require any user's password to unlock it. Now, quit Disk Utility and again open Terminal.</p>

<p>Now that the disk is mounted, navigate to your home directory, which in my case is:</p>

<pre><code># cd /Volumes/Macintosh\ HD/Users/justin
</code></pre>

<p>Then, run rEFInd's install script, which I'd placed right there:</p>

<pre><code># refind-bin-0.11.4/refind-install
</code></pre>

<p>This script will mount the EFI system partition to <code>/Volumes/ESP</code>, install itself, and bless itself in the Mac's <a href="https://support.apple.com/en-us/HT204063">NVRAM</a> so that upon boot, rEFInd is the first thing that's executed.</p>

<p>Before the installer exits, it will also report that it's copied a configuration file to <code>refind.conf</code>.</p>

<p>We need to edit this file to enable macOS hardware &quot;spoofing&quot; so that Windows has any chance of booting successfully while an eGPU is connected.</p>

<p>Run this command to open vim and edit the configuration file:</p>

<pre><code># vim /Volumes/ESP/EFI/refind/refind.conf
</code></pre>

<p>If you don't know vim, don't worry, there's not a lot to do here. Just follow exactly these keystrokes:</p>

<ol>
<li><p>type <code>'/spoof'</code> and hit enter</p></li>

<li><p>position the cursor over the <code>#</code> character at the beginning of the line that reads <code>#spoof_osx_version 10.9</code> (you can use the arrow keys)</p></li>

<li><p>hit the <code>x</code> key to delete the <code>#</code>, effectively uncommenting it</p></li>

<li><p>type <code>:wq</code> and hit enter to write the file and quit vim</p></li>
</ol>

<p>Congratulations, now you know vim. Quit terminal, and shut down the machine.</p>

<p>Now, each time you boot, you'll be treated to this really ugly splash page that will remind you of the year of Linux on the desktop, whichever year that was for you:</p>

<p><img src="/uploads/egpu/Image 2-1.jpeg" alt="the rEFInd boot UI" /></p>

<p>To boot Windows with macOS hardware spoofing, boot the first item on the left. Use the arrow keys and enter to launch it. For macOS, you want to select the second option. It's useful to keep in mind that rEFInd will automatically boot the previously used partition after a 20 second timeout. This is handy, because if you boot while you're in clamshell mode, you're not going to see this screen on your external display. Just wait, and eventually the machine will boot into whatever operating system you used most recently.</p>

<p>If you need to switch between operating systems across boots, you'll need to either hit the correct arrow key at the right time or crack the lid to see what's going on.</p>

<h2 id="that-s-all-folks">That's all, folks!</h2>

<p>Congratulations, you're now too tired to want to play any games with your now-capable-of-running-them MacBook Pro.</p>

<p>But seriously, eGPUs represent an exciting branch of enthusiast computer hardware in an era of increasingly mundane and by-the-numbers computing upgrades. For being so niche and little known, there's clearly a ton of investment being made by multiple hardware manufacturers (with new enclosures hitting the market each quarter), by Apple and Microsoft (from whom, each operating system release over the last two years has improved eGPU support), and from Intel  (whose Thunderbolt 3 API for the eGPU spec has realized the dream of plug-and-play interoperability between hundreds of enclosure-and-GPU combinations.</p>

<p>It'll be interesting to see where things go from here, and even if you don't have imminent plans to build your own travel-friendly PC gaming battle station, you might want to keep tabs on the <a href="https://egpu.io">eGPU.io forums</a> or the <a href="https://reddit.com/r/egpu">/r/eGPU subreddit</a> every now and again, because this sort of gaming configuration is getting easier all the time.</p>

      <hr>
      <div class="aftermath">
        
          <time pubdate datetime="2019-06-30">
            2019.06.30
          </time>
        
      </div>
  </article>

      </div><footer>
  <nav>
    <ul>
      
        <li><a href="https://twitter.com/searls">tweet me</a></li>
      
      
        <li><a href="https://github.com/searls">fork me</a></li>
      
      
        <li><a href="mailto:justin@searls.co">write me</a></li>
      
    </ul>
  </nav>
  

<script src="https://justin.searls.co/js/bundle.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js" integrity="sha256-47DEQpj8HBSa&#43;/TImW&#43;5JCeuQeRkm5NMpJWZG3hSuFU="></script>


</footer>
</div>
  </body>
</html>
